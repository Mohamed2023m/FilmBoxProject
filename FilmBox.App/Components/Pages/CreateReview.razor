@page "/review/create"
@using FilmBox.App.ViewModel
@inject ReviewViewModel Vm

<h3>Create Review</h3>

<div>
    <label>MediaId:</label>
    <input type="number" @bind="Vm.MediaId" />
    <button @onclick="LoadStub">Load</button>
</div>

@if (Vm.LoadedMedia != null)
{
    <img src="@Vm.LoadedMedia.ImageUrl" style="width:150px;border-radius:5px;" />

    <h4>@Vm.LoadedMedia.Title</h4>
    <p>@Vm.LoadedMedia.Genre</p>
    <p>@Vm.LoadedMedia.PublishDate?.Year</p>
    <p>@Vm.LoadedMedia.Description</p>
}
else
{
    <p>Indtast MediaId og tryk Load.</p>
}

<div>
    <label>Rating:</label>
    <select @bind="Vm.Rating">
        @for (int i = 1; i <= 5; i++)
        {
            <option value="@i">@i</option>
        }
    </select>
</div>

<div>
    <label>Comment:</label><br />
    <textarea rows="5" cols="40" @bind="Vm.Description"></textarea>
</div>

<button @onclick="Submit">Submit</button>

@if (!string.IsNullOrEmpty(Vm.Message))
{
    <p>@Vm.Message</p>
}

@code {
    void LoadStub()
    {
        Vm.LoadStubMedia();
    }

    async Task Submit()
    {
        await Vm.SubmitReviewAsync();
    }
}