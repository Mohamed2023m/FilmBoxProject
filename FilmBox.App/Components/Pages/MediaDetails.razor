@page "/details/{Id:int}"
@using FilmBox.App.ViewModel
@inject MediaDetailViewModel VM

<h3>Media Details</h3>

@if (VM.Dto == null)
{
    <p>Loading...</p>
}
else
{
    <ul>
        <li><b>Title:</b> @VM.Dto.Title</li>
        <li><b>Description:</b> @VM.Dto.Description</li>
        <li><b>Genre:</b> @VM.Dto.Genre</li>
        <li><b>Image URL:</b> @VM.Dto.ImageUrl</li>
        <li><b>Publish Date:</b> @VM.Dto.PublishDate</li>
    </ul>

    <button @onclick="GoBack">⬅ Back</button>
}

@code {

       [Inject] NavigationManager Nav { get; set; }

    private void GoBack()
    {
        Nav.NavigateTo("/media");
    }

    [Parameter]
    public int Id { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await VM.LoadAsync(Id);
    }

    private async Task Load()
    {
        await VM.LoadAsync(Id);
    }
}
